<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="/css/admindashboard.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
    <style>
          body {
            background-color: #f4f7fc;
            font-family: 'Open Sans', sans-serif;
        }
        .order-details-card {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        .order-details-header {
            background-color: #8650c4;
            color: #fff;
            padding: 20px;
            border-radius: 8px 8px 0 0;
        }
        .order-details-body {
            padding: 20px;
        }
        .status-select {
            width: auto;
            display: inline-block;
        }
    </style>
    <header class="coza-header">
        <div class="container">
            <div class="logo">Coza Store</div>
            <!-- Add more header elements or navigation links as needed -->
        </div>
    </header>
    <div class="dashboard-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="logo">Admin Dashboard</div>
            <br> <br>
            <ul class="">
                <li><a href="/admin/dashboard" class="active"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="/admin/userlist" class="active"><i class="fa-solid fa-users"></i> Users</a></li>
                <li><a href="/admin/productlist" class="active "><i class="fas fa-shopping-cart"></i> Products</a></li>
                <li><a href="/admin/oderDetails" class="active "><i class="fas fa-file-alt"></i> Orders</a></li>
                <li><a href="/admin/category " class="active"><i class="fas fa-list"></i> Categories</a></li>
                <li><a href="/admin/Coupon" class="active"><i class="fa-solid fa-money-bill"></i> Coupon</a></li>
                <li><a href="/admin/offer" class="active"><i class="fa-solid fa-tag"></i> offer</a></li>
                <li><a href="/admin/banner" class="active"><i class="fa-regular fa-note-sticky"></i>Banner</a></li>
                <li><a href="/admin/logout" class="active"><i class="fa-solid fa-arrow-right-from-bracket"></i>
                        Logout</a></li>
            </ul>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="topbar">
                <div class="menu-toggle">&#9776; Menu</div>
                <div class="user-profile">
                    <!-- <img src="images/user-avatar.jpg" alt="User Avatar"> -->
                    <span>Admin User</span>
                </div>
            </div>

           

                <div class="container ">
                    <div class="row justify-content-center">
                        <div class="col-md-10">
                            <div class="order-details-card">
                                <div class="order-details-header">
                                    <h4>Order Details</h4>
                                </div>
                                <div class="order-details-body">
                                    <div class="mb-3 row">
                                        <label class="col-sm-3 col-form-label">Order ID:</label>
                                        <div class="col-sm-9">
                                            <p class="form-control-plaintext" ><%= orderDetails._id %></p>
                                        </div>
                                    </div>
                                    <div class="mb-3 row">
                                        <label class="col-sm-3 col-form-label">Date:</label>
                                        <div class="col-sm-9">
                                            <p class="form-control-plaintext"><%= new Date(orderDetails.createdAt).toLocaleDateString() %></p>
                                        </div>
                                    </div>
                                    <div class="mb-3 row">
                                        <label class="col-sm-3 col-form-label">Customer:</label>
                                        <div class="col-sm-9">
                                            <p class="form-control-plaintext"><%= orderDetails.userId.name %></p>
                                        </div>
                                    </div>
                                    <div class="mb-3 row">
                                        <label class="col-sm-3 col-form-label">Total Price:</label>
                                        <div class="col-sm-9">
                                            <p class="form-control-plaintext">$<%= orderDetails.orderAmount %></p>
                                        </div>
                                    </div>
                                    <div class="mb-3 row">
                                        <label class="col-sm-3 col-form-label">Status:</label>
                                        <div class="col-sm-9">
                                            <p class="form-control-plaintext"><%= orderDetails.orderStatus %></p>
                                        </div>
                                    </div>
                                    <div class="mb-4 row">
                                        <label class="col-sm-3 col-form-label">Change Status:</label>
                                        <div class="col-sm-9 d-flex align-items-center">
                                            <form action="" method="POST" class="status-select">
                                                <input type="hidden" name="orderId" id="orderId"  value="<%= orderDetails._id %>">
                                                <select class="form-select" id="orderStatus" name="orderStatus" required>
                                                    <option value="">Select Status</option>
                                                    <option value="pending">Pending</option>
                                                    <option value="processing">Processing</option>
                                                    <option value="shipped">Shipped</option>
                                                    <option value="delivered">Delivered</option>
                                                    <option value="cancelled">Cancelled</option>
                                                </select>
                                               
                                                <button type="button"  id="update" class="btn btn-dark ms-2 mt-4">Update</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                

        </main>
    </div>

    <script>
document.addEventListener('DOMContentLoaded',function(){
    const updatebtn= document.getElementById('update')
    updatebtn.addEventListener('click',function(e){
        const orderId=document.getElementById('orderId').value
        const selectedOrderStatus = document.getElementById('orderStatus').value;
        e.preventDefault()
        axios.post('/admin/updatestatus',{orderId,selectedOrderStatus})
        .then(res=>{
            if(res.data.success){
                window.location.href='/admin/oderDetails'
            }
        }).catch(err=>{
            console.log('error in axios');
        })
    })
})

    </script>
    <!-- <script src="js/dashboard.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script> -->

</body>

</html>